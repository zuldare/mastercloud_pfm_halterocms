@startuml

actor Organizer as Organizer
actor Inscriber as Inscriber
actor OrganizationSecretary as OrganizationSecretary
actor Time as Time
actor TimeKeeper as TimeKeeper
actor Spectator as Spectator
actor CompetitionSecretary as CompetitionSecretary
actor User

package Log {
  usecase Login as login
  usecase Logout as logout
}

User --> login
User --> logout

User <|-- Organizer
User <|-- Inscriber
User <|-- OrganizationSecretary
User <|-- CompetitionSecretary
CompetitionSecretary <|-- TimeKeeper

newpage
left to right direction

package AdminManagement {

  package Clubs_Management {
      usecase "Show clubs" as showClubs
      usecase "Edit club" as editClub
      usecase "Delete club" as deleteClub
  }

  package OrganizersManagement {
    usecase "Show organizers" as showOrganizers
    usecase "Edit organizer" as editOrganizer
    usecase "Delete organizer" as deleteOrganizer
  }

  package InscribersManagement {
    usecase "Show inscribers" as showInscribers
    usecase "Delete inscriber" as deleteInscriber
    usecase "Edit inscriber" as editInscriber
  }

  package CategoryManagement {
    usecase "Toggle category availability" as toggleCategory
    usecase "Delete category" as deleteCategory
    usecase "Edit category" as editCategory
    usecase "Show categories" as showCategories
  }
}

OrganizationSecretary --> showClubs
OrganizationSecretary --> editClub
OrganizationSecretary --> deleteClub

OrganizationSecretary --> showOrganizers
OrganizationSecretary --> editOrganizer
OrganizationSecretary --> deleteOrganizer
OrganizationSecretary --> showOrganizers

OrganizationSecretary --> deleteInscriber
OrganizationSecretary --> editInscriber
OrganizationSecretary --> showInscribers

OrganizationSecretary --> deleteCategory
OrganizationSecretary --> editCategory
OrganizationSecretary --> toggleCategory
OrganizationSecretary --> showCategories

newpage
left to right direction

package COMPETITION_BUREAUCRACY {
  usecase "Open inscriptions" as openInscriptions
  usecase "Close inscriptions" as closeInscriptions

  usecase "Delete competition" as deleteCompetition
  usecase "Edit competition" as editCompetition
  note right of editCompetition: Actions in state diagram would be \n -Set competition organizer \n -Set inscription period \n -Set number of batches \n -Set location \n -Set date \n - Set type

  usecase "Draw lifters" as drawLifters
  usecase "Inscribe lifter" as inscribeLifter
  usecase "Delete lifter" as uninscribeLifter
  usecase "Show inscribed lifter" as showInscribedLifter
  usecase "Generate classification" as generateClassification
}

Time --> closeInscriptions
Organizer --> closeInscriptions
Organizer --> openInscriptions
Organizer --> drawLifters
Organizer --> deleteCompetition
Organizer --> editCompetition
Organizer --> generateClassification

Inscriber --> inscribeLifter
Inscriber --> uninscribeLifter
Inscriber --> showInscribedLifter


newpage
left to right direction

package BATCH {
  usecase "Configure batches" as createBatch
  'TODO quitar las flechas y set tecniacl officers etc etc lo llevas a un diagrama de estados
  'TODO meter la configuraciÃ³n de los atletas en esta parte
  usecase "Delete batch" as deleteBatch
  usecase "Set weighin time" as setBatchWeightInDate
  usecase "Set start time" as setBatchStartTime
  usecase "Set location" as setBatchLocation
  usecase "Set gender" as setGender
  usecase "Set number of platforms" as platformNumber
  usecase "Set technical officers" as setTecnicalOfficers

  createBatch ---> setBatchLocation
  createBatch ---> platformNumber
  createBatch ---> setBatchWeightInDate
  createBatch ---> setBatchStartTime
  createBatch ---> setGender
  createBatch ---> setTecnicalOfficers

  usecase "Assign athlete to batch" as assignAthleteToBatch
  usecase "Unassign athlete to batch" as unassignedAthleteToBatch

  usecase "Weighin introduction" as weighToAct
  usecase "Show athlete category" as showAthleteCategory
  usecase "Select athlete name" as writeDownAthleteName
  usecase "Write down athlete bodyweight" as writeDownAthleteBodyWeight
  usecase "Calculate athlete category" as calculateAthleteCategory
  usecase "Set lift status" as setLiftStatus
  usecase "Set lift value" as setLiftValue
  'son acciones
  usecase "Set lift weight change" as setLiftWeightChange
  usecase "Generate batch act" as generateBatchAct
  usecase "Upload batch handwritten acts" as uploadActs
  usecase "Upload batch handwritten weighing act" as uploadWeightAct
  usecase "Upload batch handwritten lifts" as uploadPlays
  usecase "Open batch"
  usecase "Play"
  uploadActs ---> uploadWeightAct
  uploadActs --> uploadPlays

  weighToAct --> writeDownAthleteName
  weighToAct --> writeDownAthleteBodyWeight
  weighToAct --> calculateAthleteCategory
}

Organizer --> createBatch
Organizer --> assignAthleteToBatch
Organizer --> unassignedAthleteToBatch
Organizer --> deleteBatch
Organizer --> uploadActs
CompetitionSecretary --> weighToAct
CompetitionSecretary --> setLiftStatus
CompetitionSecretary --> setLiftValue
CompetitionSecretary --> generateBatchAct
CompetitionSecretary --> setLiftWeightChange

newpage
left to right direction

package TIMER {
  usecase "Start timer" as startTimer
  usecase "Pause timer" as pauseTimer
  usecase "Resume timer" as resumeTimer
  usecase "Set timer duration" as setTimerDuration
  usecase "Stop timer" as stopTimer
}

TimeKeeper --> startTimer
TimeKeeper --> pauseTimer
TimeKeeper --> resumeTimer
TimeKeeper --> stopTimer
TimeKeeper --> setTimerDuration
Time --> stopTimer


newpage
left to right direction

package SPECTATOR_VIEW {
  usecase "Show competition inscription" as showCompetitionData
  usecase "Show batch inscriptions" as showBatchInscriptions
  usecase "Show batch weighins" as showBatchWeighins
  usecase "Show batch results" as showFinishedBatchsData
  usecase "Show live batch in play" as showLiveBatchInPlay
  usecase "Show results" as showResults
  usecase "Download results" as downloadResults
}
Spectator --> showCompetitionData
Spectator --> showBatchInscriptions
Spectator --> showBatchWeighins
Spectator --> showFinishedBatchsData
Spectator --> showLiveBatchInPlay
Spectator --> showResults
Spectator --> downloadResults

'secretario ponerle como herencia de timekeerper y quitar las relaciones com time
@enduml